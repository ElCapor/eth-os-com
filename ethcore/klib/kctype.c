#include "klib/kctype.h"

static const unsigned short SYMBOL_TABLE[256] = {
    // control codes 1
    0b0000000000000001, 0b0000000000000001, 0b0000000000000001,
    0b0000000000000001, 0b0000000000000001, 0b0000000000000001,
    0b0000000000000001, 0b0000000000000001, 0b0000000000000001,
    // tab
    0b0000000000001101,
    // whitespaces
    0b0000000000000101, 0b0000000000000101, 0b0000000000000101,
    0b0000000000000101,
    // control codes 2
    0b0000000000000001, 0b0000000000000001, 0b0000000000000001,
    0b0000000000000001, 0b0000000000000001, 0b0000000000000001,
    0b0000000000000001, 0b0000000000000001, 0b0000000000000001,
    0b0000000000000001, 0b0000000000000001, 0b0000000000000001,
    0b0000000000000001, 0b0000000000000001, 0b0000000000000001,
    0b0000000000000001, 0b0000000000000001, 0b0000000000000001,
    // scape
    0b0000000000001110,
    // punct 1
    0b0000000000110010, 0b0000000000110010, 0b0000000000110010,
    0b0000000000110010, 0b0000000000110010, 0b0000000000110010,
    0b0000000000110010, 0b0000000000110010, 0b0000000000110010,
    0b0000000000110010, 0b0000000000110010, 0b0000000000110010,
    0b0000000000110010, 0b0000000000110010, 0b0000000000110010,
    // numbers
    0b0000110001010010, 0b0000110001010010, 0b0000110001010010,
    0b0000110001010010, 0b0000110001010010, 0b0000110001010010,
    0b0000110001010010, 0b0000110001010010, 0b0000110001010010,
    0b0000110001010010,
    // punct 2
    0b0000000000110010, 0b0000000000110010, 0b0000000000110010,
    0b0000000000110010, 0b0000000000110010, 0b0000000000110010,
    0b0000000000110010,
    // uppercase letters (hex flagged)
    0b0000100111010010, 0b0000100111010010, 0b0000100111010010,
    0b0000100111010010, 0b0000100111010010, 0b0000100111010010,
    // uppercase letters
    0b0000000111010010, 0b0000000111010010, 0b0000000111010010,
    0b0000000111010010, 0b0000000111010010, 0b0000000111010010,
    0b0000000111010010, 0b0000000111010010, 0b0000000111010010,
    0b0000000111010010, 0b0000000111010010, 0b0000000111010010,
    0b0000000111010010, 0b0000000111010010, 0b0000000111010010,
    0b0000000111010010, 0b0000000111010010, 0b0000000111010010,
    0b0000000111010010, 0b0000000111010010,
    // punct 3
    0b0000000000110010, 0b0000000000110010, 0b0000000000110010,
    0b0000000000110010, 0b0000000000110010, 0b0000000000110010,
    // lowercase letters (hex flagged)
    0b0000101011010010, 0b0000101011010010, 0b0000101011010010,
    0b0000101011010010, 0b0000101011010010, 0b0000101011010010,
    // lowercase letters
    0b0000001011010010, 0b0000001011010010, 0b0000001011010010,
    0b0000001011010010, 0b0000001011010010, 0b0000001011010010,
    0b0000001011010010, 0b0000001011010010, 0b0000001011010010,
    0b0000001011010010, 0b0000001011010010, 0b0000001011010010,
    0b0000001011010010, 0b0000001011010010, 0b0000001011010010,
    0b0000001011010010, 0b0000001011010010, 0b0000001011010010,
    0b0000001011010010, 0b0000001011010010,
    // punct 4
    0b0000000000110010, 0b0000000000110010, 0b0000000000110010,
    0b0000000000110010,
    // backspace
    0b0000000000000001,

    // empty (for safe)
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000, 0b0000000000000000,
    0b0000000000000000, 0b0000000000000000};

static int __kisalnum(char c) { return SYMBOL_TABLE[c] & (1 << 6); }
static int __kisalpha(char c) { return SYMBOL_TABLE[c] & (1 << 7); }
static int __kisblank(char c) { return SYMBOL_TABLE[c] & (1 << 3); }
static int __kiscntrl(char c) { return SYMBOL_TABLE[c] & 1; }
static int __kisdigit(char c) { return SYMBOL_TABLE[c] & (1 << 10); }
static int __kisgraph(char c) { return SYMBOL_TABLE[c] & (1 << 4); }
static int __kislower(char c) { return SYMBOL_TABLE[c] & (1 << 9); }
static int __kisprint(char c) { return SYMBOL_TABLE[c] & (1 << 1); }
static int __kispunct(char c) { return SYMBOL_TABLE[c] & (1 << 5); }
static int __kisspace(char c) { return SYMBOL_TABLE[c] & (1 << 2); }
static int __kisupper(char c) { return SYMBOL_TABLE[c] & (1 << 8); }
static int __kisxdigit(char c) { return SYMBOL_TABLE[c] & (1 << 11); }

static char __ktoupper(char c) { return __kisalpha(c) > 0 ? c & ~0x20 : c; }
static char __ktolower(char c) { return __kisalpha(c) > 0 ? c | 0x20 : c; }
